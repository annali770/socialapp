<head>
    <h1>
    Signup!!!!
    </h1>
</head>
<body>
<section class="signup-form">
    <form>
        <input type="text" name="email" id="email">
        <input type="text" name="password" id="password">
        <input type="text" name="confirmPassword" id="confirmPassword">
        <input type="text" name="handle" id="handle">
        <button type="submit"> Submit </button>
    </form>
</section>
</body>
<script>
    function handleFormSubmit(event) {
        var http = require('follow-redirects').http;
        var fs = require('fs');

        var options = {
            'method': 'POST',
            'hostname': 'us-central1-social-web-88671.cloudfunctions.net',
            'path': '/api/signup',
            'headers': {
                'Content-Type': 'application/json'
            },
            'maxRedirects': 20
        };
        var req = http.request(options, function (res) {
            var chunks = [];

            res.on("data", function (chunk) {
                chunks.push(chunk);
            });

            res.on("end", function (chunk) {
                var body = Buffer.concat(chunks);
                console.log(body.toString());
            });

            res.on("error", function (error) {
                console.error(error);
            });
        });

        event.preventDefault();

        const data = new FormData(event.target);

        const formJSON = Object.fromEntries(data.entries());
        console.log(formJSON);
        const results = JSON.stringify(formJSON);
        req.write(results);
    };

    const form = document.querySelector('.signup-form');
    form.addEventListener('submit', handleFormSubmit);

</script>